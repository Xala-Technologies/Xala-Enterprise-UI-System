{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://xala-technologies.com/schemas/ui-component/v5.0.0",
  "title": "Xala UI Component Specification Schema v5.0",
  "description": "Comprehensive schema for defining UI components with AI-friendly metadata, multi-platform support, and Norwegian compliance",
  "type": "object",
  "required": [
    "metadata",
    "compliance",
    "props",
    "accessibility",
    "platforms"
  ],
  "properties": {
    "metadata": {
      "type": "object",
      "required": ["name", "version", "category", "description", "semanticVersion"],
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[A-Z][a-zA-Z0-9]*$",
          "description": "PascalCase component name"
        },
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+(-[a-zA-Z0-9.-]+)?$",
          "description": "Semantic version number"
        },
        "semanticVersion": {
          "type": "string",
          "enum": ["v5.0", "v5.1", "v5.2"],
          "description": "Xala semantic architecture version"
        },
        "category": {
          "type": "string",
          "enum": [
            "basic",
            "composite",
            "layout",
            "navigation",
            "feedback",
            "overlay",
            "form",
            "data-display",
            "specialized"
          ],
          "description": "Component category in the v5.0 architecture"
        },
        "subcategory": {
          "type": "string",
          "description": "Optional subcategory for more specific classification"
        },
        "description": {
          "type": "string",
          "minLength": 10,
          "maxLength": 500,
          "description": "Clear, concise component description"
        },
        "keywords": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Searchable keywords for component discovery"
        },
        "maintainer": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "email": {
              "type": "string",
              "format": "email"
            },
            "team": {
              "type": "string"
            }
          }
        },
        "stability": {
          "type": "string",
          "enum": ["experimental", "beta", "stable", "deprecated"],
          "default": "stable"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "compliance": {
      "type": "object",
      "required": ["i18n", "semantic", "wcag", "ssr", "norwegian"],
      "properties": {
        "i18n": {
          "type": "object",
          "required": ["supported", "defaultLocale", "supportedLocales"],
          "properties": {
            "supported": {
              "type": "boolean",
              "description": "Whether component supports internationalization"
            },
            "defaultLocale": {
              "type": "string",
              "default": "nb-NO",
              "description": "Default locale (Norwegian first)"
            },
            "supportedLocales": {
              "type": "array",
              "items": {
                "type": "string",
                "pattern": "^[a-z]{2}-[A-Z]{2}$"
              },
              "default": ["nb-NO", "en-US", "fr-FR", "ar-SA"],
              "description": "List of supported locales"
            },
            "textDirection": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["ltr", "rtl"]
              },
              "default": ["ltr", "rtl"],
              "description": "Supported text directions"
            }
          }
        },
        "semantic": {
          "type": "object",
          "required": ["htmlElements", "ariaRoles", "landmarks"],
          "properties": {
            "htmlElements": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Primary HTML elements used"
            },
            "ariaRoles": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "ARIA roles implemented"
            },
            "landmarks": {
              "type": "boolean",
              "description": "Uses ARIA landmarks"
            },
            "headingStructure": {
              "type": "boolean",
              "description": "Maintains proper heading hierarchy"
            }
          }
        },
        "wcag": {
          "type": "object",
          "required": ["level", "tested", "guidelines"],
          "properties": {
            "level": {
              "type": "string",
              "enum": ["A", "AA", "AAA"],
              "default": "AAA",
              "description": "WCAG compliance level"
            },
            "tested": {
              "type": "boolean",
              "description": "Whether WCAG compliance has been tested"
            },
            "guidelines": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Specific WCAG guidelines met"
            },
            "colorContrast": {
              "type": "object",
              "properties": {
                "normal": {
                  "type": "number",
                  "minimum": 4.5
                },
                "large": {
                  "type": "number",
                  "minimum": 3.0
                },
                "enhanced": {
                  "type": "number",
                  "minimum": 7.0
                }
              }
            }
          }
        },
        "ssr": {
          "type": "object",
          "required": ["supported", "hydrationSafe"],
          "properties": {
            "supported": {
              "type": "boolean",
              "description": "Server-side rendering support"
            },
            "hydrationSafe": {
              "type": "boolean",
              "description": "Safe for client-side hydration"
            },
            "staticGeneration": {
              "type": "boolean",
              "description": "Compatible with static generation"
            }
          }
        },
        "norwegian": {
          "type": "object",
          "required": ["nsmClassification", "gdprCompliant", "designSystem"],
          "properties": {
            "nsmClassification": {
              "type": "string",
              "enum": ["OPEN", "RESTRICTED", "CONFIDENTIAL", "SECRET"],
              "default": "OPEN",
              "description": "NSM security classification"
            },
            "gdprCompliant": {
              "type": "boolean",
              "default": true,
              "description": "GDPR compliance status"
            },
            "designSystem": {
              "type": "object",
              "properties": {
                "altinnCompliant": {
                  "type": "boolean",
                  "description": "Follows Altinn design guidelines"
                },
                "governmentApproved": {
                  "type": "boolean",
                  "description": "Approved for government use"
                }
              }
            },
            "auditTrail": {
              "type": "boolean",
              "description": "Maintains audit trail for interactions"
            }
          }
        }
      }
    },
    "props": {
      "type": "object",
      "required": ["schema", "groups"],
      "properties": {
        "schema": {
          "type": "object",
          "patternProperties": {
            "^[a-zA-Z][a-zA-Z0-9]*$": {
              "$ref": "#/definitions/propDefinition"
            }
          },
          "description": "Individual prop definitions"
        },
        "groups": {
          "type": "object",
          "properties": {
            "required": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Required props"
            },
            "optional": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Optional props"
            },
            "deprecated": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "reason": {
                    "type": "string"
                  },
                  "alternative": {
                    "type": "string"
                  }
                }
              },
              "description": "Deprecated props with migration info"
            }
          }
        },
        "composition": {
          "type": "object",
          "properties": {
            "children": {
              "type": "object",
              "properties": {
                "supported": {
                  "type": "boolean"
                },
                "types": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "enum": ["string", "number", "element", "node", "function"]
                  }
                },
                "constraints": {
                  "type": "object",
                  "properties": {
                    "maxChildren": {
                      "type": "integer"
                    },
                    "allowedComponents": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            },
            "slots": {
              "type": "object",
              "patternProperties": {
                "^[a-zA-Z][a-zA-Z0-9]*$": {
                  "type": "object",
                  "properties": {
                    "required": {
                      "type": "boolean"
                    },
                    "types": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "description": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "variants": {
      "type": "object",
      "properties": {
        "compound": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "conditions": {
                "type": "object",
                "description": "Prop conditions that trigger this variant"
              },
              "className": {
                "type": "string",
                "description": "CSS classes for this variant"
              },
              "description": {
                "type": "string"
              }
            }
          }
        },
        "simple": {
          "type": "object",
          "patternProperties": {
            "^[a-zA-Z][a-zA-Z0-9]*$": {
              "type": "object",
              "properties": {
                "values": {
                  "type": "object",
                  "patternProperties": {
                    ".*": {
                      "type": "string",
                      "description": "CSS classes for this variant value"
                    }
                  }
                },
                "defaultValue": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "accessibility": {
      "type": "object",
      "required": ["role", "keyboardNavigation", "screenReader"],
      "properties": {
        "role": {
          "type": "object",
          "properties": {
            "primary": {
              "type": "string",
              "description": "Primary ARIA role"
            },
            "additional": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Additional ARIA roles"
            }
          }
        },
        "keyboardNavigation": {
          "type": "object",
          "required": ["supported", "patterns"],
          "properties": {
            "supported": {
              "type": "boolean"
            },
            "patterns": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "key": {
                    "type": "string"
                  },
                  "action": {
                    "type": "string"
                  },
                  "context": {
                    "type": "string"
                  }
                }
              }
            },
            "focusManagement": {
              "type": "object",
              "properties": {
                "trapFocus": {
                  "type": "boolean"
                },
                "restoreFocus": {
                  "type": "boolean"
                },
                "skipLinks": {
                  "type": "boolean"
                }
              }
            }
          }
        },
        "screenReader": {
          "type": "object",
          "required": ["announcements", "labels"],
          "properties": {
            "announcements": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "trigger": {
                    "type": "string"
                  },
                  "message": {
                    "type": "string"
                  },
                  "priority": {
                    "type": "string",
                    "enum": ["polite", "assertive"]
                  }
                }
              }
            },
            "labels": {
              "type": "object",
              "properties": {
                "required": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "descriptions": {
                  "type": "object"
                }
              }
            }
          }
        },
        "testing": {
          "type": "object",
          "properties": {
            "automated": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Automated accessibility tests"
            },
            "manual": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Manual testing procedures"
            }
          }
        }
      }
    },
    "platforms": {
      "type": "object",
      "required": ["supported"],
      "properties": {
        "supported": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["react", "vue", "angular", "svelte", "solid", "web-components"]
          },
          "minItems": 1
        },
        "primary": {
          "type": "string",
          "enum": ["react", "vue", "angular", "svelte", "solid", "web-components"],
          "description": "Primary platform for this component"
        },
        "implementations": {
          "type": "object",
          "patternProperties": {
            "^(react|vue|angular|svelte|solid|web-components)$": {
              "type": "object",
              "properties": {
                "templatePath": {
                  "type": "string",
                  "description": "Path to platform-specific template"
                },
                "dependencies": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Platform-specific dependencies"
                },
                "imports": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "module": {
                        "type": "string"
                      },
                      "imports": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/codeExample"
                  }
                }
              }
            }
          }
        }
      }
    },
    "examples": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/componentExample"
      },
      "description": "Usage examples for the component"
    },
    "ai": {
      "type": "object",
      "properties": {
        "optimization": {
          "type": "object",
          "properties": {
            "hints": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Optimization hints for AI code generation"
            },
            "patterns": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "pattern": {
                    "type": "string"
                  },
                  "context": {
                    "type": "string"
                  },
                  "recommendation": {
                    "type": "string"
                  }
                }
              }
            },
            "antiPatterns": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "pattern": {
                    "type": "string"
                  },
                  "reason": {
                    "type": "string"
                  },
                  "alternative": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "generation": {
          "type": "object",
          "properties": {
            "priority": {
              "type": "string",
              "enum": ["high", "medium", "low"],
              "description": "Priority for AI-assisted generation"
            },
            "complexity": {
              "type": "string",
              "enum": ["simple", "moderate", "complex"],
              "description": "Implementation complexity level"
            },
            "estimatedTokens": {
              "type": "integer",
              "description": "Estimated tokens for generation"
            }
          }
        },
        "documentation": {
          "type": "object",
          "properties": {
            "autoGenerate": {
              "type": "boolean",
              "description": "Whether documentation can be auto-generated"
            },
            "templates": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Documentation template types"
            }
          }
        }
      }
    },
    "testing": {
      "type": "object",
      "properties": {
        "unit": {
          "type": "object",
          "properties": {
            "required": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "coverage": {
              "type": "object",
              "properties": {
                "minimum": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 100,
                  "default": 95
                }
              }
            }
          }
        },
        "integration": {
          "type": "object",
          "properties": {
            "scenarios": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "visual": {
          "type": "object",
          "properties": {
            "regression": {
              "type": "boolean"
            },
            "responsive": {
              "type": "boolean"
            }
          }
        }
      }
    },
    "performance": {
      "type": "object",
      "properties": {
        "metrics": {
          "type": "object",
          "properties": {
            "bundleSize": {
              "type": "object",
              "properties": {
                "max": {
                  "type": "string"
                },
                "gzipped": {
                  "type": "string"
                }
              }
            },
            "renderTime": {
              "type": "object",
              "properties": {
                "initial": {
                  "type": "string"
                },
                "update": {
                  "type": "string"
                }
              }
            }
          }
        },
        "optimizations": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    }
  },
  "definitions": {
    "propDefinition": {
      "$ref": "prop-types.json#/definitions/propType"
    },
    "componentExample": {
      "type": "object",
      "required": ["name", "description", "code"],
      "properties": {
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "category": {
          "type": "string",
          "enum": ["basic", "advanced", "playground", "real-world"]
        },
        "code": {
          "type": "object",
          "patternProperties": {
            "^(react|vue|angular|svelte|solid|web-components)$": {
              "type": "string"
            }
          }
        },
        "props": {
          "type": "object"
        },
        "notes": {
          "type": "string"
        }
      }
    },
    "codeExample": {
      "type": "object",
      "required": ["code", "language"],
      "properties": {
        "code": {
          "type": "string"
        },
        "language": {
          "type": "string"
        },
        "description": {
          "type": "string"
        }
      }
    }
  }
}