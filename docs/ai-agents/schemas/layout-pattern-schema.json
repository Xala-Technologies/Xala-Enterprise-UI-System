{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://xala.ai/schemas/layout-patterns/v1.0.0",
  "title": "AI Layout Pattern Schema",
  "description": "Schema for defining intelligent layout patterns for AI code generation",
  "version": "1.0.0",
  "type": "object",
  "required": ["id", "name", "category", "aiContext", "structure", "variants"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z][a-z0-9-]*$",
      "description": "Unique identifier for the layout pattern"
    },
    "name": {
      "type": "string",
      "description": "Human-readable pattern name"
    },
    "description": {
      "type": "string",
      "description": "Detailed description of the pattern and its use cases"
    },
    "category": {
      "type": "string",
      "enum": ["dashboard", "landing-page", "form", "e-commerce", "mobile-app", "content", "navigation"],
      "description": "Primary category for AI pattern matching"
    },
    "aiContext": {
      "type": "object",
      "required": ["triggers", "useCases", "complexity"],
      "properties": {
        "triggers": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Natural language phrases that should trigger this pattern"
        },
        "useCases": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["admin-dashboard", "analytics", "user-management", "content-management", "e-commerce", "marketing-site", "blog", "portfolio", "mobile-app", "desktop-app"]
          },
          "description": "Specific use cases where this pattern applies"
        },
        "complexity": {
          "type": "string",
          "enum": ["simple", "moderate", "complex", "enterprise"],
          "description": "Complexity level for AI generation prioritization"
        },
        "targetAudience": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["end-users", "admins", "content-creators", "developers", "customers"]
          },
          "description": "Primary user types for this pattern"
        },
        "industryVerticals": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["technology", "healthcare", "finance", "education", "retail", "government", "nonprofit"]
          },
          "description": "Industries where this pattern is commonly used"
        }
      }
    },
    "structure": {
      "type": "object",
      "required": ["layout", "components"],
      "properties": {
        "layout": {
          "type": "object",
          "required": ["type", "hierarchy"],
          "properties": {
            "type": {
              "type": "string",
              "enum": ["grid", "flexbox", "stack", "sidebar", "header-footer", "card-grid", "hero-sections", "multi-column"],
              "description": "Primary layout mechanism"
            },
            "hierarchy": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "level": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 5
                  },
                  "component": {
                    "type": "string"
                  },
                  "role": {
                    "type": "string",
                    "enum": ["container", "header", "navigation", "content", "sidebar", "footer", "modal", "overlay"]
                  },
                  "required": {
                    "type": "boolean"
                  },
                  "variants": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "required": ["level", "component", "role"]
              }
            }
          }
        },
        "components": {
          "type": "object",
          "patternProperties": {
            "^[A-Z][a-zA-Z0-9]*$": {
              "type": "object",
              "properties": {
                "role": {
                  "type": "string",
                  "description": "Semantic role in the pattern"
                },
                "required": {
                  "type": "boolean",
                  "description": "Whether this component is required for the pattern"
                },
                "defaultProps": {
                  "type": "object",
                  "description": "Default props for optimal pattern implementation"
                },
                "aiRecommendations": {
                  "type": "object",
                  "properties": {
                    "preferredVariants": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "avoidedProps": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "contextualTips": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  }
                }
              },
              "required": ["role", "required"]
            }
          }
        },
        "responsive": {
          "type": "object",
          "properties": {
            "breakpoints": {
              "type": "object",
              "patternProperties": {
                "^(mobile|tablet|desktop|wide)$": {
                  "type": "object",
                  "properties": {
                    "layout": {
                      "type": "string"
                    },
                    "componentChanges": {
                      "type": "object"
                    },
                    "hiddenComponents": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            },
            "mobileFirst": {
              "type": "boolean",
              "description": "Whether pattern is designed mobile-first"
            }
          }
        }
      }
    },
    "variants": {
      "type": "object",
      "patternProperties": {
        "^[a-z][a-zA-Z0-9]*$": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "aiTriggers": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "modifications": {
              "type": "object",
              "properties": {
                "layout": {
                  "type": "object"
                },
                "components": {
                  "type": "object"
                },
                "styling": {
                  "type": "object"
                }
              }
            },
            "useCases": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "required": ["name", "description", "modifications"]
        }
      }
    },
    "codeGeneration": {
      "type": "object",
      "properties": {
        "platforms": {
          "type": "object",
          "patternProperties": {
            "^(react|vue|angular|svelte|flutter|ios|android)$": {
              "type": "object",
              "properties": {
                "template": {
                  "type": "string",
                  "description": "Code template for this platform"
                },
                "imports": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "dependencies": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "optimizations": {
                  "type": "object",
                  "properties": {
                    "lazyLoading": {
                      "type": "boolean"
                    },
                    "codesplitting": {
                      "type": "boolean"
                    },
                    "bundleOptimization": {
                      "type": "object"
                    }
                  }
                }
              },
              "required": ["template"]
            }
          }
        },
        "customization": {
          "type": "object",
          "properties": {
            "tokenOverrides": {
              "type": "object",
              "description": "Design token customizations for this pattern"
            },
            "componentOverrides": {
              "type": "object",
              "description": "Component-specific customizations"
            },
            "styleCustomizations": {
              "type": "object",
              "description": "CSS/styling customizations"
            }
          }
        }
      }
    },
    "performance": {
      "type": "object",
      "properties": {
        "metrics": {
          "type": "object",
          "properties": {
            "bundleSize": {
              "type": "object",
              "properties": {
                "estimated": {
                  "type": "string"
                },
                "gzipped": {
                  "type": "string"
                }
              }
            },
            "renderTime": {
              "type": "object",
              "properties": {
                "initial": {
                  "type": "string"
                },
                "interactive": {
                  "type": "string"
                }
              }
            },
            "memoryUsage": {
              "type": "string"
            }
          }
        },
        "optimizations": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "enum": ["lazy-loading", "code-splitting", "tree-shaking", "image-optimization", "caching"]
              },
              "description": {
                "type": "string"
              },
              "implementation": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "accessibility": {
      "type": "object",
      "properties": {
        "wcagLevel": {
          "type": "string",
          "enum": ["A", "AA", "AAA"],
          "description": "WCAG compliance level"
        },
        "keyboardNavigation": {
          "type": "object",
          "properties": {
            "tabOrder": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "shortcuts": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "key": {
                    "type": "string"
                  },
                  "action": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "screenReader": {
          "type": "object",
          "properties": {
            "landmarks": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "headingStructure": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "level": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 6
                  },
                  "text": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "colorContrast": {
          "type": "object",
          "properties": {
            "minimumRatio": {
              "type": "number"
            },
            "validatedCombinations": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "foreground": {
                    "type": "string"
                  },
                  "background": {
                    "type": "string"
                  },
                  "ratio": {
                    "type": "number"
                  }
                }
              }
            }
          }
        }
      }
    },
    "testing": {
      "type": "object",
      "properties": {
        "unitTests": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "description": {
                "type": "string"
              },
              "testCase": {
                "type": "string"
              },
              "expected": {
                "type": "string"
              }
            }
          }
        },
        "integrationTests": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "scenario": {
                "type": "string"
              },
              "steps": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "validation": {
                "type": "string"
              }
            }
          }
        },
        "accessibilityTests": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "rule": {
                "type": "string"
              },
              "testMethod": {
                "type": "string"
              },
              "expected": {
                "type": "string"
              }
            }
          }
        },
        "performanceTests": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "metric": {
                "type": "string"
              },
              "threshold": {
                "type": "string"
              },
              "measurement": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "examples": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "industry": {
            "type": "string"
          },
          "complexity": {
            "type": "string",
            "enum": ["simple", "moderate", "complex"]
          },
          "aiOptimized": {
            "type": "boolean"
          },
          "code": {
            "type": "object",
            "patternProperties": {
              "^[a-z]+$": {
                "type": "string"
              }
            }
          },
          "preview": {
            "type": "object",
            "properties": {
              "image": {
                "type": "string"
              },
              "demo": {
                "type": "string"
              }
            }
          },
          "metrics": {
            "type": "object",
            "properties": {
              "performanceScore": {
                "type": "number"
              },
              "accessibilityScore": {
                "type": "number"
              },
              "seoScore": {
                "type": "number"
              }
            }
          }
        },
        "required": ["name", "description", "code"]
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "version": {
          "type": "string"
        },
        "lastModified": {
          "type": "string",
          "format": "date-time"
        },
        "author": {
          "type": "string"
        },
        "contributors": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "popularity": {
          "type": "object",
          "properties": {
            "usage": {
              "type": "number"
            },
            "rating": {
              "type": "number"
            },
            "downloads": {
              "type": "number"
            }
          }
        }
      }
    }
  }
}